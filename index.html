<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html>
<head>
				<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
						<!-- Latest compiled and minified CSS -->
						<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
						<link rel="stylesheet" href="https://bootswatch.com/slate/bootstrap.min.css">

<style>
div.caption p{	min-height: 100px;}
div.caption a{ margin: 10px auto 5px auto; width: 100%;}
h3 {color: orange;}
#loader {
		padding:0px;
		top:0px;
		left:0px;
    z-index:200;
    width:100%;
    height: 100%;
    position:absolute;
    display: block;
		overflow: hidden;
    background-color: rgba(0,0,0, 0.6);
}

#loader .caption {
	margin: 30% auto;
	width:  45%;

}

</style>

</head>
<body>
<header>
<nav class="navbar navbar-default">
<h1>Pr&eacute;sentations <small>R&ecirc;vez|D&eacute;couvrez|Apprenez</small></h1>
</nav>
</header>

<div class="container-fluid">
<div id="loader" >
		<div class="caption">
			Chargement des Presentations ...
			<div class="progress">
  <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="0"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">
  </div>
	</div>
  </div>
</div>


<div class="row-fluid" id="main"></div>
</div>

<footer>
	<nav class="navbar navbar-default navbar-fixed-bottom navbar-inverse">
	<p>Dominique Derrier |</p>
	</nav>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script>
var info;
$(function(){
console.log("let's start dd");

message=function(){
mess=["Apprenez en plus",
	"Découvrez ici",
	"Trouvez la",
	"Des idées par la"];
return mess[Math.floor( (Math.random()*10)%mess.length)];
}

$("#main").hide();
launch=function() {
	$.getJSON( "info.json" )
  .done(function( json ) {
		info=json;

		$.each(json['decks'],function(key,val) {
			a=$("<div class='col-xs-4' >"+
					"<div class='thumbnail' >"+
						"<img />"+
						"<div class='caption'/>"+
						"</div>"+
					"</div>");

			a.find("img").attr("src",val.img);

			title=$("<h3>"+val.name+"</h3>");
			a.find(".caption").append(title);
			abstract=$("<p>"+val.abstract+"</p>");
			a.find(".caption").append(abstract);

			link=$("<a href="+val.url+" class='btn btn-warning' role='button'>"+message()+"</a>");
			a.find(".caption").append(link);
			$("#main").append(a);
		}
		);


  });
};


progress=function(){
var progress_value = parseInt($(".progress-bar").attr('aria-valuenow'))+10;

if( progress_value<110) {
	$(".progress-bar").attr("aria-valuenow",progress_value);
	$(".progress-bar").css("width",progress_value+"%");
	time=setTimeout(progress, 250);
}

else {
	$("#main").show('slow');
	$("#loader").hide('slow');
}

}

//Load content
launch();
// fake progress bar :)
progress();
//time=setTimeout(launch, 3000);
});
</script>

</body>
</html>
